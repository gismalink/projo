# Workflow Checklist

Короткий чеклист на каждый инкремент.

## 1) Реализация
1. Уточнить scope и критерий готовности.
2. Внести изменения в API/Web.
3. Если меняется Prisma schema:
	- создать migration,
	- выполнить `npm run prisma:generate -w @projo/api`,
	- выполнить `npm run prisma:migrate -w @projo/api`.

## 2) Локальная проверка
1. Базовая проверка: `npm run verify`.
2. При изменениях API runtime-логики: `SMOKE_API=1 npm run verify`.
3. Проверка security gate для API зависимостей: `npm run audit:api`.
4. Ручной smoke-check критического пользовательского сценария.

## 3) Документация
1. Обновить `README.md` как индекс документации и инструкций запуска.
2. Обновить профильные документы в `docs/`:
	- `architecture-overview.md`,
	- `api-reference.md`,
	- `product-spec.md`,
	- `implementation-roadmap.md`.
3. Для нетривиальных изменений обновить/создать технический аудит (`docs/audits/technical-audit-YYYY-MM-DD.md`) с:
	- списком найденных hardcode,
	- приоритетами рефакторинга,
	- планом выноса конфигурации.

## 4) Перед завершением
1. Проверить `git status` (без случайных артефактов).
2. Убедиться, что i18n-ключи согласованы для `ru/en`.
3. Сделать понятный коммит с кратким описанием изменения.
4. Проверить отсутствие новых `as any` и временных заглушек в измененных файлах.

## Частые пропуски
1. Забытый Prisma migrate после изменения schema.
2. Несинхронность API DTO и frontend payload полей.
3. Обновление только README без синхронизации `docs/*`.
4. Успешный build без проверки фактического UX-сценария.

## Ручной smoke: Timeline day-step (weekend)
1. Открыть Timeline, выбрать шаг «день».
2. Выбрать период/год с заведомо пустыми выходными (без holidays override).
3. Проверить, что в выходные в `Company Load` нет видимых столбцов при `0%`.
4. Сравнить weekday vs weekend на одном диапазоне: в рабочие дни бары есть при загрузке, в выходные — только при реальной загрузке не `0`.
5. Переключить шаг `день → неделя → день` и убедиться, что weekend-поведение сохраняется.
